# Cellular IoT Monitor  

*Transmit sensor data from remote locations without internet.*
*Transfer data to email, text, Google Sheets, IFTTT, Home Assistant, and more for less than $2 per month.*

<br>

## How It Works

An inexpensive IoT SIM card gains access to the cloud via a cellular connection.

The HUB connects to the cellular network or wifi or both.

The HUB can operate as a stand-alone unit with its own sensors.

The HUB can also collect data wirelessly from separate sensor platforms.

The hub software - **AmbientHUB** - and 
the sensor software - **AmbientAP** - 
are written in C++ with the using the **Arduino IDE**.

The **AmbientHUB** software controls an **ESP32**
micro-controller connected with onboard sensors 
and an optional **OLED** display.

<br>

## Hands on Technology presentation of 2/2/2022

Available ![here](https://github.com/Bobbo117/Cellular-IoT-Monitor/blob/main/doc/Cellular%20IoT%20Homewatch.pdf)
<br>
Summary:

<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/20706cdb-4d9c-4480-8253-2d5d93e25787" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/fdac9afa-5380-434b-a6b1-5a3061b3ade8" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/dc222f43-c16d-4e21-9295-73912c72eb0c" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/6cefa03a-ad8b-4350-bec1-d0b9f47f0f7c" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/e9239603-03e7-473c-a210-e1de91fc909a" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/1fd8b6fb-1663-4151-9c65-44c85847df29" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/4fb2b8c0-59f0-4a56-9c78-eb26d497461d" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/975e2df0-5ea8-4eff-afcc-fbfbf5e5dc4d" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/69486b8d-c001-4542-9ee1-1ba91980c77d" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/135f18a6-2758-4119-bce1-1d329f641a3b" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/fa0b85c0-eb35-4f4a-8612-e61931f7d9d9" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/6c78b677-7294-4ed3-b157-09aa3efdd129" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/3b311ce6-828b-4ca6-8362-a34e9c42e7cc" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/792c8688-b35d-4a85-920f-c9b523a97c9f" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/b12654d5-c9ee-4336-9b6a-037c22393a6e" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/5c134d3c-5afa-4803-8953-83f0e7b3474d" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/dcdd76bd-4987-48a8-b77e-0a7b90e2317e" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/1de7085f-45f7-4869-bc3d-f98f9ccceb9f" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/4899e25d-1dd1-4d3f-989b-c77a65f1373f" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/0127c2fa-b5d9-4608-80ce-b9c8647c7c97" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/ba1e8d16-ac92-412f-bb1b-1a78675159df" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/b65e3c31-1aa2-4cf8-94cf-147138aeadb5" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/394852da-6596-45d2-9564-94450fcb5298" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/2b09ce9b-87c0-4e11-b7d8-7654a172d75a" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/55835f1b-2bba-4361-9aac-313629e0e329" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/e412b51b-314f-4a4a-9073-0c228cabe583" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/4abe6d99-9a4a-44f4-a8e7-4fe606236d1c" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/343c0449-2660-4875-b088-fd726b30beee" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/d0e4b4f5-1615-4c81-ab7c-e7fd246e0ff2" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/c0821de0-28f4-4eb6-9db1-2516c0883415" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/6b413537-888d-4278-8779-b4ea6a97abf5" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/5b1915f4-39cc-4b44-b463-b4693bb1cef0" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/2c25064c-8870-4254-b90b-471330764fc2" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/433a083e-fa57-48be-baca-b8297b824803" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/7ad68a13-1015-4d49-9799-b1c8c75a9ddb" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/4553a33a-3dd5-4acf-9564-9425f187337a" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/e973a129-318a-44d6-8df0-582e999f0d0a" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/82bff791-4961-4b92-88da-f72dbf455069" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/2286d71d-d06e-4632-ad14-cfc184a79df0" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/877e66dc-8d62-4615-b0cb-a119d46bc9c4" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/85003f70-22d8-4b9e-9c10-b348dc704197" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/98d7c294-c670-48e2-9d30-07c7b5343478" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/ffc11f60-dbf3-436f-b781-7bcaff80e176" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/d32078d7-c985-4f13-9b31-e38453594dba" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/3bd22411-413d-455c-b96b-1abda5b9fba3" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/84b505e9-6a7f-4ae3-bf95-4dcb7c46e437" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/14143453-9382-4462-9818-6dc186219bd9" />

<br>

Additional developments since the above description are reflected below and in the software.

<br>
<br>

## Tested With

-   [**Botletics** `SIM7000A` cellular modem Arduino shield]( 
    https://github.com/botletics/SIM7000-LTE-Shield/wiki)

-   [**LiLLYGO** `SIM7000G` board with 
    integrated **ESP32** Wrover](
    https://www.amazon.com/LILYGO-Development-ESP32-WROVER-B-Battery-T-SIM7000G/dp/B099RQ7BSR)
    
    ![20230607_105519](https://github.com/Bobbo117/gpsTracker/assets/58577175/be021b8f-4aa4-4a6b-95e0-d9151d2ecfd4)

-   [**and-global** `SIM7000A` module](
    https://www.and-global.com/)

<br>
<br>

## Supported Protocols

The **AmbientHUB** software can receive the **AmbientAP** 
sensor data using the listed protocols.

-  `http` where each sensor is configured 
   as a server which can be polled by the 
   hub using a **GET** command.

-  `ESP-Now` a lighter footprint protocol by 
   which the sensors push the data to the 
   hub based on its MAC address.
   https://www.espressif.com/en/products/software/esp-now/resources

<br>
<br>

## Formatting Options

The **AmbientHUB** software collects the sensor values 
for hourly transmission via the **Hologram** IoT cellular 
platform to the listed website services.

### Supported Services via Cellular

-    https://io.adafruit.com/ MQTT for dashboard and redundant IFTTT webhook route

-    https://ifttt.com/ for notifying to up to 20 email accounts plus Google sheets

-    https://dweet.io/ which simply saves the messages in scratchpad format as a backup in case of IFTTT failure

### Supported Services via Wifi

-    Home Assistant or any MQTT Broker using a local wifi router

-    Telegram for tailored commands


<br>
<br>

## Threshold Alert

The **AmbientHUB** software provides <br>
immediate alerts when sensors cross adaptive thresholds.

<br>

### Builtin Modules

-   An [ESP32](//www.amazon.com/MELIFE-Development-Dual-Mode-Microcontroller-Integrated/dp/B07Q576VWZ?th=1) or a D1 Mini 8266 micro-controller

-   temperature / humidity sensors
   `BME-280`, MCP9808, `DHTxx`, AHT10, SHT20

-   An optional `SSD1306` OLED display 
    https://www.amazon.com/gp/product/B07W1PT6VK

-   [door / window sensors](
    https://www.amazon.com/dp/B09BJLRK4S/)

-   [illumination sensors](
    https://www.amazon.com/eBoot-Photoresistor-Sensitive-Resistor-Dependent/dp/B01N7V536K/)

-   [flood sensors](
    https://www.amazon.de/-/en/Sensor-Moisture-Splash-Arduino-Raspberry/dp/B01MRIBI2M)
    
-   [PIR/ motion Sensors](
    https://www.amazon.com/DIYmall-HC-SR501-Motion-Infrared-Arduino/dp/B012ZZ4LPM)
    
-   [HC-SR04 or HC-SR04P Ultrasonic sensor](
    https://www.amazon.com/dp/B07VZBYSLX/ref=cm_sw_em_r_mt_dp_05X0C8N082YTTBTS895K?_encoding=UTF8&psc=1&pldnSite=1)
    
-   [DC 5V 1 Channel Relay Module Board Shield High/Low Level Trigger with Optocoupler](
    https://www.amazon.com/gp/product/B079FJSYGY/ref=ox_sc_act_title_11?smid=A11A70Q280RHPK&th=1)

## Further Discussion

After trying several configurations, here is what I'd recommend:

- LillyGo over Botletics since it has the ESP32 on the board with the cellular modem. 

- The ESPNOW protocol over client/server because of the lighter footprint and easier implementation.
  
- Use the adaFruit path to access IFTTT for more reliable performance.

- Standardize on the ESP32 vs 8266 for more robust capabilities and to simplify your life moving forward.

- Dweet has bitten the dust.  Get on the google to find an alternative.

- Use a timer to disconnect the power from the LillyGo or Botletics daily.

All of the above alternatives can be configured in the software.

<br>
## Observations

- Kudos to Hologram.  They have a polished dashboard which makes life easy to monitor. 

<br>
## Conclusions

## Attributions and References

<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/84b505e9-6a7f-4ae3-bf95-4dcb7c46e437" />
<img width="640" height="360" alt="image" src="https://github.com/user-attachments/assets/14143453-9382-4462-9818-6dc186219bd9" />

<!----------------------------------------------------------------------------->

[Badge License]: https://img.shields.io/badge/License-Unknown-808080.svg?style=for-the-badge

[License]: 5

